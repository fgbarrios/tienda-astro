---
import MainLayout from "../Layout/MainLayout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
---

<script>
import { getFirstPostsQuery } from '../lib/queries'

const response = await fetch(`http://checkout.tuempresaenlaweb.com.ar/graphql/`,
	{
		method: 'POST',
		headers: { 'Content-Type': 'application/json' },
		body: JSON.stringify({
			query: getFirstPostsQuery,
			variables: {
				first: 20,
			},
		}),
	})
const json = await response.json();
const allPosts = json.data.posts.edges;
const heroPost = allPosts[0];

let heroPostDiv = document.querySelector('#heroPost');
heroPostDiv.textContent = JSON.stringify(heroPost);

//const morePosts = allPosts.slice(1)
</script>


<MainLayout>

  <Header/>
		
    <h1>Astro</h1>
    <div id="heroPost"></div>

    <Footer/>
</MainLayout>


